<%# app/views/components/sidebar.ejs %>
<aside class="sidebar">
  <div class="sidebar-logo">
    <img src="/images/logo.jpg" alt="Logo" />
  </div>

  <nav class="sidebar-menu">
    <ul>
      <li class="<%= currentPage === 'dashboard' ? 'active' : '' %>">
        <a href="/api/orders/dashboard">
          <i class="fas fa-tachometer-alt"></i>
          <span>Summary</span>
        </a>
      </li>
      <li class="<%= currentPage === 'orders' ? 'active' : '' %>">
        <a href="/api/orders">
          <i class="fas fa-shopping-cart"></i>
          <span>Orders</span>
        </a>
      </li>
      <li class="<%= currentPage === 'products' ? 'active' : '' %>">
        <a href="/api/variants">
          <i class="fas fa-box"></i>
          <span>Products</span>
        </a>
      </li>
      <li class="<%= currentPage === 'customers' ? 'active' : '' %>">
        <a href="/api/users">
          <i class="fas fa-users"></i>
          <span>Users</span>
        </a>
      </li>
      <li class="<%= currentPage === 'customers' ? 'active' : '' %>">
        <a href="/api/reports">
          <i class="fas fa-users"></i>
          <span>Reports</span>
        </a>
      </li>
    </ul>
  </nav>

  <div class="sidebar-footer">
    <a href="/logout" class="logout-btn">
      <i class="fas fa-sign-out-alt"></i>
      <span>Logout</span>
    </a>
  </div>

  <script>
    document
      .querySelector(".logout-btn")
      .addEventListener("click", function (e) {
        e.preventDefault();

        fetch("/api/auth/logout", {
          method: "GET",
          credentials: "same-origin",
        })
          .then((response) => response.json())
          .then((data) => {
            if (data.message === "Logged out successfully") {
              window.location.href = "/login";
            } else {
              alert("Logged out unsuccessfully");
            }
          })
          .catch((error) => {
            console.error("Error:", error);
            alert("Error occurred:", error);
          });
      });
  </script>
</aside>
